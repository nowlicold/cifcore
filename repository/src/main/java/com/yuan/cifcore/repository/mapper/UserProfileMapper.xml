<?xml version="1.0" encoding="GB2312" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<!-- ==========================================================  -->
<!-- Configuration for ibatis sqlmap mapping.                    -->
<!-- ==========================================================  -->

<!-- ============================================================================= -->
<!-- This file is generated by <tt>bench-gen-dal</tt>, a DAL (Data Access Layer)  -->
<!-- code generation utility specially developed for <tt>bench</tt> project.     -->
<!--                                                                               -->
<!-- PLEASE DO NOT MODIFY THIS FILE MANUALLY, or else your modification may be     -->
<!-- OVERWRITTEN by someone else. To modify the file, you should go to directory   -->
<!-- <tt>(project-home)/biz/dal/src/conf/dalgen</tt>, and find the corresponding   -->
<!-- configuration files. Modify those files according to your needs, then run     -->
<!-- <tt>bench-gen-dal</tt> to generate this file.                                -->
<!--                                                                               -->
<!-- @author nowli                                                          -->
<!-- ============================================================================= -->

<mapper namespace="com.yuan.cifcore.repository.mapper.UserProfileMapper">
	
    <!-- ============================================= -->
    <!-- RESULT MAPS                                   -->
    <!-- ============================================= -->

    <!-- result maps for database table cif_user_profile -->
    <resultMap id="RM-USER-PROFILE" type="com.yuan.cifcore.repository.entity.UserProfileDO">
        <result property="id" column="id"  javaType="long"  jdbcType="DECIMAL"/>
        <result property="userId" column="user_id"  javaType="java.lang.String"  jdbcType="VARCHAR"/>
        <result property="profileName" column="profile_name"  javaType="java.lang.String"  jdbcType="VARCHAR"/>
        <result property="profileValue" column="profile_value"  javaType="java.lang.String"  jdbcType="LONGVARCHAR"/>
        <result property="gmtCreate" column="gmt_create"  javaType="java.util.Date"  jdbcType="TIMESTAMP"/>
        <result property="gmtModified" column="gmt_modified"  javaType="java.util.Date"  jdbcType="TIMESTAMP"/>
        <result property="modifier" column="modifier"  javaType="java.lang.String"  jdbcType="VARCHAR"/>
        <result property="creater" column="creater"  javaType="java.lang.String"  jdbcType="VARCHAR"/>
        <result property="enabled" column="enabled"  javaType="boolean"  jdbcType="CHAR"/>
    </resultMap>

    <sql id="Base_Column_List">
         id  ,
         user_id  ,
         profile_name  ,
         profile_value  ,
         gmt_create  ,
         gmt_modified  ,
         modifier  ,
         creater  ,
         enabled 
    </sql>



   <sql id="SQL-CIF-USER-PROFILE-searchWhereSql">
	  <where>
			               <if test="userId != null and userId != ''">  
			               		and user_id=#userId#
                            </if>
						  	<if test="profileName != null and profileName != ''"> 
							     and profile_name=#profileName#
                            </if>
                             <if test="profileValue != null and profileValue != ''"> 
							     and profile_value=#profileValue#
                            </if>
                             <if test="enabled != null">                              
							     and enabled= #enabled#
                            </if>
                            
                            <if test="minGmtCreate != null">                              
							     and gmt_create &gt;= #minGmtCreate#
                            </if>
                            <if test="maxGmtCreate != null">                              
							     and gmt_create &lt;= #maxGmtCreate#
                            </if>
                            <if test="minGmtModified != null">                              
							     and gmt_modified &gt;= #minGmtModified#
                            </if>
                             <if test="maxGmtModified != null">                              
							     and gmt_modified &lt;= #maxGmtModified#
                            </if> 
                     </where>
   </sql>

    <!-- ============================================= -->
    <!-- mapped statements for IbatisUserProfileDAO -->
    <!-- ============================================= -->
    <!-- mapped statement for IbatisUserProfileDAO.selectById -->
    <select id="selectById" resultMap="RM-USER-PROFILE">
    <![CDATA[
        select id, user_id, profile_name, profile_value, gmt_create, gmt_modified, modifier, creater, enabled from cif_user_profile where (id = #{id})
    ]]>
    </select>
    <!-- mapped statement for IbatisUserProfileDAO.selectEnabledByUserIdAndProfileName -->
    <select id="selectEnabledByUserIdAndProfileName" resultMap="RM-USER-PROFILE">
        select id, user_id, profile_name,			profile_value, gmt_create,			gmt_modified,modifier,creater,enabled from cif_user_profile			where			user_id= #{userId}			and profile_name=#{profileName}			<if test="enabled != null">			  and enabled=#{enabled}			</if>
    </select>
    <!-- mapped statement for IbatisUserProfileDAO.selectEnabledByUserIdAndProfileNames -->
    <select id="selectEnabledByUserIdAndProfileNames" resultMap="RM-USER-PROFILE">
        select id, user_id, profile_name,			profile_value, gmt_create,			gmt_modified,modifier,creater,enabled from cif_user_profile			where			user_id= #{userId}			and profile_name in			<foreach open="(" close=")" separator="," collection="profileNames" item="item">				#{item}			</foreach>			<if test="enabled != null">			  and enabled=#{enabled}			</if>
    </select>
    <!-- mapped statement for IbatisUserProfileDAO.selectEnabledByUserIdsAndProfileName -->
    <select id="selectEnabledByUserIdsAndProfileName" resultMap="RM-USER-PROFILE">
        select id, user_id, profile_name,			profile_value, gmt_create,			gmt_modified,modifier,creater,enabled from cif_user_profile			where			profile_name=#{profileName}  and user_id in			<foreach open="(" close=")" separator="," collection="userIds" item="item">				#{item}			</foreach>			<if test="enabled != null">			  and enabled=#{enabled}			</if>
    </select>
    <!-- mapped statement for IbatisUserProfileDAO.updateProfileValueByUserIdAndProfileName -->
    <update id="updateProfileValueByUserIdAndProfileName">
    <![CDATA[
        update cif_user_profile set profile_value=#{profileValue}, gmt_modified=sysdate(), modifier=#{modifier}, enabled=#{enabled} where ((user_id = #{userId}) AND (profile_name = #{profileName}))
    ]]>
    </update>

    <!-- mapped statement for IbatisUserProfileDAO.updateProfileEnabled -->
    <update id="updateProfileEnabled">
    <![CDATA[
        update cif_user_profile set gmt_modified=sysdate(), modifier=#{modifier}, enabled=#{enabled} where ((user_id = #{userId}) AND (profile_name = #{profileName}))
    ]]>
    </update>

    <!-- mapped statement for IbatisUserProfileDAO.search -->
    <!-- queryPage分页方法dba注意sqlreview -->
    <select id="search" resultMap="RM-USER-PROFILE">
        select id, user_id, profile_name,			profile_value, gmt_create,			gmt_modified,modifier,creater,enabled from cif_user_profile				<include refid="SQL-CIF-USER-PROFILE-searchWhereSql"/>				order by id desc
    </select>
    <!-- mapped statement for IbatisUserProfileDAO.searchWithRecordCount -->
    <select id="searchWithRecordCount" resultMap="RM-USER-PROFILE">
        select id, user_id, profile_name,			profile_value, gmt_create,			gmt_modified,modifier,creater,enabled from cif_user_profile				<include refid="SQL-CIF-USER-PROFILE-searchWhereSql"/>				order by id desc limit 0,#recordLimitAmount#
    </select>
    <!-- mapped statement for IbatisUserProfileDAO.selectRandomUserIdsByProfileNameEnabled -->
    <select id="selectRandomUserIdsByProfileNameEnabled" resultType="java.lang.String">
        select user_id from cif_user_profile where			profile_name=#{profileName}  			  <if test="enabled != null">                              				 and enabled= #{enabled}              </if>					 order by DBMS_RANDOM.random limit 0,#recordLimitAmount#
    </select>
    <!-- mapped statement for IbatisUserProfileDAO.selectEnabledUserIdByProfileNameAndValue -->
    <select id="selectEnabledUserIdByProfileNameAndValue" resultType="java.lang.String">
    <![CDATA[
        select user_id from cif_user_profile where ((profile_name = #{profileName}) AND (profile_value = #{profileValue}) AND (enabled = 1))
    ]]>
    </select>
 

</mapper>